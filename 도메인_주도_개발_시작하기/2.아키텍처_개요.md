## **아키텍처 개요**

소프트웨어는 천천히 지속적이고 점진적으로 변화한다. 시대의 흐름에 따라 소프트웨어에서 웹으로 전환되었듯 만약 웹에서 앱으로 전환해야 한다면 처음 부터 새로 만들어야 할지도 모른다. 하지만 역할이 서로 분리 되어 있다면 ui부분만 추가 된다면 전체를 바꿀 필요가 없어 진다.

### **아키텍처 네가지 영역**

<img width="491" alt="image" src="https://user-images.githubusercontent.com/51963264/191590863-fd4e7332-acd9-43c6-90bd-cd7558b7a380.png">


마틴파울러는 `Pattern of Enterprise Application Achitecture` 에서 아키텍처를 여러 계층으로 나눠 설계했다. `표현`,`응용`,`도메인`,`인프라스트럭처`는 대표적인 아키텍처 영역이다.

웹 애플리케이션에서 표현 영역은 HTTP요청을 응용영역에 적합한 데이터 형식으로 변환한 후 응용영역에 전달하고 응용영역의 응답 데이터를 HTTP로 전환하여 전송한다.

응용영역은 표현영역을 통해 사용자의 요청을 받아 사용자에게 제공해야 할 기능을 구현한다. 여기서 로직을 직접 수행하기 보다는 도메인 모델에 로직수행을 위임한다. 도메인 영역은 도메인 모델을 구현한다. 도메인 모델은 도메인의 핵심 로직을 구현한다. 인프라 영역에서는 구현 기술에 대해 다룬다. 이 영역에서 DB 연동 처리나 메세징 큐등을 수행한다.

### **DIP**

계층구조는 특성상 하위 계층에 종속되는데 그럴 경우 다음과 같은 문제점이 발생한다. 

1. 테스트하기 어렵다.
2. 구현 방식을 변경하기 어렵다.


<img width="534" alt="image" src="https://user-images.githubusercontent.com/51963264/191591966-7e896627-daa0-4c8b-9991-2c896aba1f22.png">

DIP는 저수준 모듈이 고수준 모듈에 의존하도록 바꿈으로써 이 문제를 해결한다.
DIP를 적용하면 고수준 모듈은 더이상 저수준 모듈에 의존하지 않고 추상화 인터페이스에 의존하게 된다. 이럴 경우 저수준 모듈은 의존성 주입을 통해 전달 받을 수 있다. 그렇게 되면 저수준 모듈이 변경되더라도 고수준 모듈에 영향을 최소화하면서 구현 기술을 바꿀 수 있다. 또한 추상화 인터페이스를 사용함으로써 구현 클래스가 없어도 테스트 대역을 통해 대부분의 기능을 테스트 할 수 있다.

### **주의점**

DIP의 핵심은 추상화 인테페이스가 아님을 명심해야한다. `DIP의 핵심은 고수준 모듈이 저수준 모듈에 의존하지 않는 것이다.` 때문에 인터페이스는 반드시 고수준 모듈에서 추출해야 한다. 이 핵심을 지키면서 모든 상황에서 DIP를 적용할 수 없다. 때문에 DIP의 이점을 얻을 수 있는 범위에서 적용을 컴토해야 한다.

