## 도메인 모델 시작하기

### **도메인**

도메인이란 소프트웨어로 해결하고자 하는 문제 영역을 말한다. 개발자 입장에서 도메인은 구현해야 할 대상이 된다. 그리고 도메인의 특징은 다음과 같다.   

- 한 도메인은 다시 하위 도메인으로 나눌 수 있다.   
(EX:서점이라는 도메인의 하위 도메인으로 주문, 카탈로그등이 있을 수 있다.)
- 하위 도메인끼리 협력하여 하나의 기능을 수행하기도 한다.
(EX:구매자가 상품을 구매 -> 주문,결제,배송이 관여)
- 도메인이라고 해서 모두 직접 구현할 필요는 없는데 꼭 필요한 기능만 직접 구현하고 나머지는 외부의 시스템을 연동하여 사용할 수 있다.
- 도메인마다 고정된 하위 도메인이 존재하는 것은 아니다.

### **도메인 모델**

일반적으로 도메인을 개념적으로 정의한 것을 `도메인 모델`이라고 한다. 도메인을 이해하려면 도메인의 기능과 값의 구성을 파악하는 것이 중요한데 그런 면에서 기능과 데이터를 함께 보여주는 객체 모델링이 유용할지도 모른다. 하지만 도메인을 모델링할 때 UML 표기법만 사용해야하는 것은 아니다. 도메인을 이해하는데 효과적이라면 어떤 표현 방식이든 상관없다.

### **도메인 모델 도출**

도메인에 대한 이해가 없으면 좋은 코드가 나올 수 없다. 도메인 이해에 대한 효과적인 방법 중 하나는 바로 전문가와의 대화이다. 도메인 각 영역에는 전문가가 있고 그들은 도메인에 대한 지식을 가지고 있다. 의사소통을 통해 요구사항을 분석하고 이를 바탕으로 도메인 모델을 도출하면 제대로된 코드가 나올 확률이 증가한다.
전문가들과 의사소통을 하기 위해서는 기본적인 도메인 지식을 갖춰야 가능하다. 그래야만 요구사항을 올바르게 이해할 수 있기 때문이다.

### 엔티티와 밸류타입

도메인 모델링에서 기본이 되는 것은 모델의 핵심요소,규칙,기능을 찾는 것이다. 이것을 제대로 도출하기 위해 엔티티와 벨류타입을 구분할 줄 알아야 한다. `엔티티`의 가장 큰 특징은 식별자를 가진다는 것이다. 식별자는 개체마다 고유해서 각 엔티티는 다른 식별자를 갖는다. 때문에 식별자가 같으면 엔티티느 같다고 판단할 수 있다.

`밸류타입`은 개념적으로 완전한 하나를 표현할 때 사용한다. 서로 다른 두 데이터를 하나로 묶어 개념적으로 하나로 만들 수 있다. 예를 들어, 개인정보 데이터와 주소 데이터를 묶어 수신사를 만들 수 있다. 하지만 반드시 두개 이상의 데이터일 필요는 없다. 의미를 명확하게 하기 위해 벨류타입을 사용할 수 있다. 

### 유비쿼터스

코드를 작성할 때 도메인에서 사용하는 용어는 매우 중요하다. 도메인에 사용하는 용어를 최대한 코드에 반영하면 코드를 도메인 용어로 해석하거나 도메인 용어를 코드로 해석하는 상황에서 시간을 크게 줄여준다. 에릭에반스는 DDD에서 언어의 중요성을 강조하기 위해 `유비쿼터스 언어`라는 용어를 사용했다. 유비쿼터스 언어는 이해관계자들이 합의 하에 만든 도메인에 대한 공통 언어로 하나의 통일된 용어로 코드 변수명,기획서 등 산출되는 모든 곳에 이 언어를 사용하는 것이다. 이로 인해 얻을 수 있는 이점은 불필요한 커뮤니케이션을 줄일 수 있다는 것이다. 유비쿼터스 언어의 특징은 발전한다는 것이다. 기획 단계에서 그치지 않고 시간이 지날 수록 도메인 지식이 쌓여 더 좋은 용어를 찾아내면 공통언어로 발전시켜 코드 뿐만 아니라 모든 산출물에 적용시켜 최신화시킬 수 있다.  

